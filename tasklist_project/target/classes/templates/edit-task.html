<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <title>Editar Tarea</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">
<div class="container">
    <h1>Editar Tarea</h1>
    <form th:action="@{'/tasks/edit/' + ${task.id}}" th:object="${task}" method="post">
    <input type="hidden" th:field="*{id}"/>

    <div class="mb-3">
        <label class="form-label">Título</label>
        <input type="text" th:field="*{title}" class="form-control" required/>
    </div>

    <div class="mb-3">
        <label class="form-label">Descripción</label>
        <textarea th:field="*{description}" class="form-control"></textarea>
    </div>

    <div class="row">
        <div class="col-md-6 mb-3">
            <label class="form-label">Fecha de Vencimiento</label>
            <input type="date" name="dueDateStr" th:value="${dueDateStr}" class="form-control"/>
        </div>

        <div class="col-md-6 mb-3">
            <label class="form-label">Prioridad</label>
            <select th:field="*{priority}" class="form-select">
                <option th:each="p : ${priorities}" th:value="${p}" th:text="${p}"
                        th:selected="${p} == ${task.priority}"></option>
            </select>
        </div>
    </div>

    <div class="mb-3">
        <label class="form-label">Estado</label>
        <select th:field="*{status}" class="form-select">
            <option th:each="s : ${statuses}" th:value="${s}" th:text="${s}"
                    th:selected="${s} == ${task.status}"></option>
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label">Equipo</label>
        <select name="teamId" class="form-select">
            <option value="">Sin equipo</option>
            <option th:each="e : ${teams}" th:value="${e.id}" th:text="${e.nombre}"
                    th:selected="${task.equipo != null and task.equipo.id == e.id}"></option>
        </select>
    </div>

    <div class="text-end">
        <a href="/tasks" class="btn btn-outline-secondary me-2">Cancelar</a>
        <button type="submit" class="btn btn-success">Guardar cambios</button>
    </div>
</form>

</div>
</body>
</html>
